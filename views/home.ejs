<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./stylesheets/form.css">
    <title>PMURLs</title>
    <link rel="stylesheet" href="./stylesheets/utils.css">
    <link rel="stylesheet" href="./stylesheets/home.css">
    
    <style>
    form{
      position:inherit;
      left:0%;
      transform:translate(0%,0%);
    }  
    .links{
      height:auto;
      width:100%;
      display:flex;
      align-items:auto;
      justify-content:space-between;
      padding-top:5vh;
      gap:4rem;
    } 
    .part1{
      height:100%;
      width:auto;
      position:relative;
      display:flex;
      align-items:center;
      justify-content:flex-start;
    }
    .part2{
      height:100%;
      width:100%;
      display:flex;
      flex-direction:column;
      align-items:flex-start;
      gap:1em;
    }
    .part2 table{
      height:auto;
      min-width:100%;
    }
    svg { 
      
      max-height:1.65em;
      color:lightseagreen;
    }
    nav{
      height:auto;
      width:100%;
      display:flex;
      align-items:center;
      justify-content:space-between;
    }
    @media (max-width:1200px){
      .links{
        flex-direction:column;
      }
      .part1, .part2{
        align-items:center;
        justify-content:center;
      }
    }
    </style>
</head>
<body>
   <div class="main">
      <nav>
         <h1>Welcome to PMURLs, <span> Mr. <%=username%></span></h1>
         <a href="/auth/logout"><button>LogOut</button></a>
      </nav>
    <br>
      <div class="links">
        <div class="part1">
          <form action="/url" method="post">
            <label for="redirectUrl">
                <p name="redirectUrl">Redirect Url:</p>
                <input type="text" placeholder="https://google.com/" name="redirectUrl" required>
            </label>
            <label for="customUrl">
                <p name="customUrl">Custom Url:</p>
                <input type="password" placeholder="yourUrl (optional)" name="customUrl" >
            </label>
            <button type="submit">Generate Link</button>
            <p><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 9.5C12.8284 9.5 13.5 8.82843 13.5 8C13.5 7.17157 12.8284 6.5 12 6.5C11.1716 6.5 10.5 7.17157 10.5 8C10.5 8.82843 11.1716 9.5 12 9.5ZM14 15H13V10.5H10V12.5H11V15H10V17H14V15Z"></path></svg> Redirect Url is the target and Custom Url is your preferred ShortId but that's optional.</p>
          </form>

        </div>
        <div class="part2">
          <h3>Your links...</h3>
          <table border="1">
            <thead>
              <tr>
                <th>Short ID</th>
                <th>Original URL</th>
              </tr>
            </thead>
            <tbody id="linkTableBody">
            </tbody>
          </table>
        </div>   
      </div>
    </div>   
  <script>
    const data = <%-links%>  
    const tableBody = document.getElementById("linkTableBody");
    data.forEach(link => {
      const tableRow = document.createElement('tr')
      const shortId = document.createElement('td')
      const redirectUrl = document.createElement('td')
      shortId.textContent = link.shortId 
      redirectUrl.textContent =  link.redirectUrl  
      tableRow.appendChild(shortId) 
      tableRow.appendChild(redirectUrl) 
      tableBody.appendChild(tableRow)
    })
  </script>
</body>
</html>
